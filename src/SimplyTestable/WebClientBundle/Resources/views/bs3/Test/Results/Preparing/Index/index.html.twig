{% extends 'SimplyTestableWebClientBundle::bs3/Abstract/single-page-dialog.html.twig' %}

{% set dialog_width = 6 %}

{% block title %}Preparing results for {% include 'SimplyTestableWebClientBundle:Partials:/url/utf8-schemeless-possibly-truncated-64.html.twig' with {'url': website} %} (#{{test.testId}}) - {{ parent() }}{% endblock %}

{% block javascripts %}
    {{ parent() }}

    {% javascripts
    '@SimplyTestableWebClientBundle/Resources/assets/bs3/js/test-results-preparing.js'
    %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}

{% block body_class %} {{ parent() }} test-results-preparing {% endblock %}

{% block content %}

    <h1>Preparing results &hellip; <span id="completion-percent-value">{{ completion_percent }}</span>% done</h1>

    <p class="intro">
        I'm gathering the results for test <strong><span title="{{website.utf8.raw}}" id="website">{% include 'SimplyTestableWebClientBundle:Partials:/url/utf8-raw-possibly-truncated-40.html.twig' with {'url': website} %}</span> (#<span id="testId">{{test.testId}}</span>)</strong>
    </p>

    <p class="summary">
        Retrieved <strong id="local-task-count">{{ local_task_count }}</strong> results of <strong id="remote-task-count">{{ remote_task_count }}</strong>
        <i class="fa fa-spinner fa-spin"></i>
    </p>

    <div class="progress">
        <div class="progress-bar" data-remaining-tasks-to-retrieve-count="{{remaining_tasks_to_retrieve_count}}" role="progressbar" aria-valuenow="{{ completion_percent }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ completion_percent }}%;"></div>
    </div>

{% endblock %}